!function(t,e,a){"use strict";let n={pupil:"green",specialist:"cyan",expert:"blue","candidate master":"violet",master:"orange","international master":"orange",grandmaster:"red","international grandmaster":"red","legendary grandmaster":"legendary",ученик:"green",специалист:"cyan",эксперт:"blue","кандидат в мастера":"violet",мастер:"orange","международный мастер":"orange",гроссмейстер:"red","международный гроссмейстер":"red","легендарный гроссмейстер":"legendary"},l,r={};function p(t){let a=this.id,n,r,p;titleT[tmpArr[a]]=e("title",t).text(),r=e("<h3 />").attr("id",tmpArr[a]).html(titleT[tmpArr[a]]+" [#"+tmpArr[a]+"]:"),p=e("<div />").html(e("pre",t).prop("outerHTML")).attr("data-id",a),e("#templates>div"+(~(n=l.slice(0,a).lastIndexOf(!0))?"[data-id="+n+"]":".cen")).after(p).after(r),l[a]=!0}t.setFileConfig=function(t,e){r[t]=e},t.parseRecords=function(t){let a,n=0,l,p,d=t.split("\n").map(t=>t.replace(/[\f\r\v]/g,"").split("|")).filter(t=>5===t.length);for(a=0,Rows=[];a<d.length;++a)(p=recordMatch(l=d[a].concat((d.length-a).toString()),curLocation,r)).length&&(Rows.push(e("<tr />").append(e("<td />").html(p[0])).append(e("<td />").html(p[1])).append(e("<td />").append(e('<a href="records/'+encodeURIComponent(l[0])+'.html" target="_blank">链接</a>'))).append(e("<td />").html(l[1])).append(e("<td />").html(l[2])).append(e("<td />").html(l[3])).append(e("<td />").html(p[2])).get(0)),++n);sortTable(curROrder),totPage=Math.ceil(n/RECORDS_PER_PAGE),curPage=curPage>=1?Math.min(curPage,totPage):1,e("#recTable").append(Rows.slice((curPage-1)*RECORDS_PER_PAGE,curPage*RECORDS_PER_PAGE)),e("#recTotal").html("统计："+(n?(curLocation||r.tag||r.search?"当前位置":"")+"共有 "+n+" 条记录":"抱歉，还没有这样的记录。")),pagination()},t.fastRedirect=function(t){let a,n,l;if(e.isNumeric(this.id)&&(a=parseInt(this.id)).toString()===this.id&&(l=t.split("\n").map(t=>t.replace(/[\f\r\v]/g,"").split("|")).filter(t=>5===t.length),0<a&&a<=l.length))return n=l[l.length-a][0],location.replace("records/"+encodeURIComponent(n)+".html"+location.hash);location.replace(getUri({}))},t.getTemplates=function(t){tmpArr=t.split("\n").map(t=>t.replace(/[\f\n\r\v]/g,"")).filter(Boolean),titleT={},l=[],tmpArr.forEach((t,a)=>e.ajax("templates/"+t+".xml",{type:"GET",dataType:"xml",id:a,success:p}))},t.parseMemos=function(t){let a,n=t.split("\n").map(t=>t.replace(/[\f\r\v]/g,"").split("|")).filter(t=>4===t.length);Rows=n.map((t,n,l)=>(a=t.concat((l.length-n).toString()),e("<tr />").append(e("<td />").html(a[4])).append(e("<td />").html(a[0])).append(e("<td />").append(e('<a href="memos/'+a[4]+'.html" target="_blank">链接</a>'))).append(e("<td />").html(a[1])).append(e("<td />").html(a[2])).data("priority",parseInt(a[3])).get(0))).sort(function(t,a){return e(a).data("priority")-e(t).data("priority")||+a.cells[0].innerText-+t.cells[0].innerText}),totPage=Math.ceil(n.length/MEMOS_PER_PAGE),curPage=curPage>=1?Math.min(curPage,totPage):1,e("#memTable").append(Rows.slice((curPage-1)*MEMOS_PER_PAGE,curPage*MEMOS_PER_PAGE)),e("#memTotal").html("统计: 共 "+n.length+" 份便笺"),pagination()},t.parseRanklist=function(t){let a;"OK"===t.status&&(Rows=t.result.map(t=>e("<tr />").append(e("<td />").append(e('<a class="user '+(n.hasOwnProperty(t.rank)?n[t.rank]:"gray")+'" href="http://codeforces.com/profile/'+t.handle+'" target="_blank">'+t.handle+"</a>"))).append(e("<td />").html(t.firstName)).append(e("<td />").html(t.lastName)).append(e("<td />").html(t.rating)).append(e("<td />").html(t.maxRating)).append(e("<td />").html(dateFormat(new Date(1e3*t.lastOnlineTimeSeconds)))).append(e("<td />").append((a=getFL(t.handle))&&e('<a href="'+a+'" target="_blank">'+a+"</a>"))).get(0)),e("#rankTable>tbody").empty().append(Rows))}}(window||this,jQuery);