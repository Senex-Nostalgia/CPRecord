<link type="text/css" rel="stylesheet" href="../additional_files/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="../additional_files/css/sh_typical.min.css">
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$', '$']], displayMath: [['$$', '$$']]}});</script>
<script type="text/javascript" src="../additional_files/MathJax-master/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<h3>题目描述</h3>
<p>我们常常会说这样的话：<q>$X$ 年是自 $Y$ 年以来降雨量最多的</q>。它的含义是 $X$ 年的降雨量<strong>不超过</strong> $Y$ 年，且对于任意 $Y &lt; Z &lt; X$，$Z$ 年的降雨量<strong>严格小于</strong> $X$ 年。</p>
<p>例如 2002, 2003, 2004 和 2005 年的降雨量分别为 $4920, 5901, 2832$ 和 $3890$，则可以说 <q>2005 年是自 2003 年以来降雨量最多的</q>，但不能说 <q>2005 年是自 2002 年以来降雨量最多的</q>。</p>
<p>由于有些年份的降雨量未知，有的说法是可能正确也可以不正确的。</p>

<h3>输入格式</h3>
<p>第一行仅包含一个正整数 $n$ ($n \leq 50000$)，为已知的数据数量。</p>
<p>接下来 $n$ 行，每行包含两个整数 $y_i, r_i$ ($|y_i| \leq 10^9, 1 \leq r_i \leq 10^9$)，为年份和降雨量，按照年份从小到大排列，即 $y_i &lt; y_{i+1}$。</p>
<p>下一行包含一个正整数 $m$ ($m \leq 10000$)，为询问的次数。</p>
<p>接下来 $m$ 行，每行包含两个数 $Y, X$，即询问 <q>$X$ 年是自 $Y$ 年以来降雨量最多的</q> 这句话是必真、必假还是有可能。</p>

<h3>输出格式</h3>
<p>对于每一个询问，输出 <code>true</code>, <code>false</code> 或者 <code>maybe</code>。</p>

<h3>题解</h3>
<p>首先默认 $Y &lt; X$，否则这句话就没有任何意义，输出 <code>false</code>。<del>(听说数据里没有这样的点？)</del></p>
<p>我们先考虑什么时候这句话 (一定) 是真的 (<code>true</code>)。</p>
<p>如果 <q>$X$ 年是自 $Y$ 年以来降雨量最多的</q>，这个比较简单，根据定义，就有 $X$ 年的降雨量不超过 $Y$ 年的，记 $i$ 年的降雨量为 $r_i$ <del>(算了还是不叫 $p_i$ 了)</del>，即 $r_Y \geq r_X$，且对任意 $Y &lt; Z &lt; X$，有 $r_Z &lt; r_X$。换句话说，即 $$ \max\limits_{Y &lt; i &lt; X} r_i &lt; r_X \leq r_Y $$</p>
<p>由于因为它确实真的，因此我们需要知道 $Y &lt; i &lt; X$ 中<strong>所有 $i$ 对应的 $r_i$</strong>，然后就是一个简单的区间最值问题。</p>
<p>再考虑它什么时候<strong>可能是真的</strong> (<code>maybe</code>)。</p>
<ol>
<li>$r_Y, r_X$ 均未知，那么什么都不知道，当然可真可假了。</li>
<li>知道 $r_Y$，不知道 $r_X$。那么对于 $Y &lt; i &lt; X$ 中的 $i$，如果<strong>存在一个 (已知的) $i$ 使得 $r_i \geq r_Y$</strong>，那么就是假，否则根据 $r_X$ 的值可真可假。</li>
<li>不知道 $r_Y$，知道 $r_X$。那么类似地，如果存在 $i$ 使得 $r_i \geq r_X$，那么为假，否则可真可假。</li>
<li>$r_Y, r_X$ 均已知，那么如果存在 $i$ 使得 $r_i \geq r_Y \vee r_i \geq r_X$，那么为假，否则如果存在未知的 $i$，那么就可真可假。</li>
</ol>
<p>那么这种判断 (是否存在已知的 $i$ 使得 $r_i \geq r_Y$ 之类的判断) 就等价于 $Y &lt; i &lt; X$ 中<strong>所有已知的 $i$ 的最大值</strong> $&lt; r_Y$，也是一个区间最值，只是它是<strong>其中已知数</strong>的区间最值，刚才的还要求全部已知。</p>
<p>那么区间最值 (<abbr title="Range Minimum Query">RMQ</abbr>) 可以用 <abbr title="Sparse Table, 稀疏表">ST</abbr> 算法实现，不过要离散化。由于点数和询问数不是很多，因此也可以直接用动态开点的线段树。</p>

<h3>代码</h3>

<div class="panel-body"><pre class="sh_sourceCode"><code class="sh_cpp"><span class="sh_preproc">#include</span> <span class="sh_string">&lt;bits/stdc++.h&gt;</span>
<span class="sh_preproc">#define</span> N <span class="sh_number">2048808</span>
<span class="sh_preproc">#define</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span>R<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span><span class="sh_function">puts</span><span class="sh_symbol">(</span>#R<span class="sh_symbol">);</span> <span class="sh_keyword">continue</span><span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
<span class="sh_keyword">using</span> <span class="sh_keyword">namespace</span> std<span class="sh_symbol">;</span>

<span class="sh_keyword">const</span> <span class="sh_type">int</span> ST_MIN <span class="sh_symbol">=</span> <span class="sh_symbol">-</span><span class="sh_number">1000000007</span><span class="sh_symbol">,</span> ST_MAX <span class="sh_symbol">=</span> <span class="sh_number">1000000007</span><span class="sh_symbol">;</span>

<span class="sh_keyword">struct</span><span class="sh_normal"> </span><span class="sh_classname">node</span><span class="sh_cbracket">{</span>
    <span class="sh_type">int</span> v<span class="sh_symbol">,</span> valid<span class="sh_symbol">,</span> lc<span class="sh_symbol">,</span> rc<span class="sh_symbol">;</span> <span class="sh_comment">// -1 means invalid</span>
<span class="sh_cbracket">}</span>st<span class="sh_symbol">[</span>N<span class="sh_symbol">];</span>

<span class="sh_type">int</span> n<span class="sh_symbol">,</span> i<span class="sh_symbol">;</span>
<span class="sh_type">int</span> u<span class="sh_symbol">,</span> v<span class="sh_symbol">,</span> ru<span class="sh_symbol">,</span> rv<span class="sh_symbol">,</span> rbet<span class="sh_symbol">;</span>
<span class="sh_type">int</span> year<span class="sh_symbol">,</span> rain<span class="sh_symbol">;</span>
<span class="sh_type">int</span> cnt <span class="sh_symbol">=</span> <span class="sh_number">1</span><span class="sh_symbol">;</span>

<span class="sh_keyword">inline</span> <span class="sh_type">void</span> <span class="sh_function">up</span><span class="sh_symbol">(</span><span class="sh_type">int</span> <span class="sh_symbol">&amp;</span>x<span class="sh_symbol">,</span> <span class="sh_keyword">const</span> <span class="sh_type">int</span> y<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>x <span class="sh_symbol">&lt;</span> y <span class="sh_symbol">?</span> x <span class="sh_symbol">=</span> y <span class="sh_symbol">:</span> <span class="sh_number">0</span><span class="sh_symbol">;</span><span class="sh_cbracket">}</span>

<span class="sh_type">int</span> <span class="sh_function">adj</span><span class="sh_symbol">(</span><span class="sh_type">int</span> id<span class="sh_symbol">,</span> <span class="sh_type">int</span> L<span class="sh_symbol">,</span> <span class="sh_type">int</span> R<span class="sh_symbol">,</span> <span class="sh_type">int</span> h<span class="sh_symbol">,</span> <span class="sh_type">int</span> v<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    id <span class="sh_symbol">?</span> <span class="sh_number">0</span> <span class="sh_symbol">:</span> <span class="sh_symbol">(</span>id <span class="sh_symbol">=</span> <span class="sh_symbol">++</span>cnt<span class="sh_symbol">);</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>L <span class="sh_symbol">==</span> R<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>valid <span class="sh_symbol">=</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>v <span class="sh_symbol">=</span> v<span class="sh_symbol">;</span> <span class="sh_keyword">return</span> id<span class="sh_symbol">;</span><span class="sh_cbracket">}</span>
    <span class="sh_type">int</span> M <span class="sh_symbol">=</span> L <span class="sh_symbol">+</span> R <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">&gt;&gt;</span> <span class="sh_number">1</span><span class="sh_symbol">;</span>
    h <span class="sh_symbol">&lt;=</span> M <span class="sh_symbol">?</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc <span class="sh_symbol">=</span> <span class="sh_function">adj</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">,</span> L<span class="sh_symbol">,</span> M<span class="sh_symbol">,</span> h<span class="sh_symbol">,</span> v<span class="sh_symbol">)</span> <span class="sh_symbol">:</span> <span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc <span class="sh_symbol">=</span> <span class="sh_function">adj</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">,</span> M <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> R<span class="sh_symbol">,</span> h<span class="sh_symbol">,</span> v<span class="sh_symbol">));</span>
    st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>v <span class="sh_symbol">=</span> <span class="sh_function">max</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>v<span class="sh_symbol">,</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>v<span class="sh_symbol">);</span>
    st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>valid <span class="sh_symbol">=</span> <span class="sh_symbol">(~</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>valid <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">~</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>valid <span class="sh_symbol">?</span> <span class="sh_function">max</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>valid<span class="sh_symbol">,</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">[</span>st<span class="sh_symbol">].</span>valid<span class="sh_symbol">)</span> <span class="sh_symbol">:</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">);</span>
    <span class="sh_keyword">return</span> id<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">int</span> <span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_type">int</span> id<span class="sh_symbol">,</span> <span class="sh_type">int</span> L<span class="sh_symbol">,</span> <span class="sh_type">int</span> R<span class="sh_symbol">,</span> <span class="sh_type">int</span> ql<span class="sh_symbol">,</span> <span class="sh_type">int</span> qr<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(!</span>id<span class="sh_symbol">)</span> <span class="sh_keyword">return</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>ql <span class="sh_symbol">&lt;=</span> L <span class="sh_symbol">&amp;&amp;</span> R <span class="sh_symbol">&lt;=</span> qr<span class="sh_symbol">)</span> <span class="sh_keyword">return</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>v<span class="sh_symbol">;</span>
    <span class="sh_type">int</span> M <span class="sh_symbol">=</span> L <span class="sh_symbol">+</span> R <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">&gt;&gt;</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> v <span class="sh_symbol">=</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>ql <span class="sh_symbol">&lt;=</span> M<span class="sh_symbol">)</span> <span class="sh_function">up</span><span class="sh_symbol">(</span>v<span class="sh_symbol">,</span> <span class="sh_function">range</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">,</span> L<span class="sh_symbol">,</span> M<span class="sh_symbol">,</span> ql<span class="sh_symbol">,</span> <span class="sh_function">min</span><span class="sh_symbol">(</span>qr<span class="sh_symbol">,</span> M<span class="sh_symbol">)));</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>qr <span class="sh_symbol">&gt;</span> M<span class="sh_symbol">)</span> <span class="sh_function">up</span><span class="sh_symbol">(</span>v<span class="sh_symbol">,</span> <span class="sh_function">range</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">,</span> M <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> R<span class="sh_symbol">,</span> <span class="sh_function">max</span><span class="sh_symbol">(</span>ql<span class="sh_symbol">,</span> M <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">),</span> qr<span class="sh_symbol">));</span>
    <span class="sh_keyword">return</span> v<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">int</span> <span class="sh_function">valid_range</span><span class="sh_symbol">(</span><span class="sh_type">int</span> id<span class="sh_symbol">,</span> <span class="sh_type">int</span> L<span class="sh_symbol">,</span> <span class="sh_type">int</span> R<span class="sh_symbol">,</span> <span class="sh_type">int</span> ql<span class="sh_symbol">,</span> <span class="sh_type">int</span> qr<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(!</span>id<span class="sh_symbol">)</span> <span class="sh_keyword">return</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>ql <span class="sh_symbol">&lt;=</span> L <span class="sh_symbol">&amp;&amp;</span> R <span class="sh_symbol">&lt;=</span> qr<span class="sh_symbol">)</span> <span class="sh_keyword">return</span> st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>valid<span class="sh_symbol">;</span>
    <span class="sh_type">int</span> M <span class="sh_symbol">=</span> L <span class="sh_symbol">+</span> R <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">&gt;&gt;</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> lv <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> rv <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>ql <span class="sh_symbol">&lt;=</span> M <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span>lv <span class="sh_symbol">=</span> <span class="sh_function">valid_range</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>lc<span class="sh_symbol">,</span> L<span class="sh_symbol">,</span> M<span class="sh_symbol">,</span> ql<span class="sh_symbol">,</span> <span class="sh_function">min</span><span class="sh_symbol">(</span>qr<span class="sh_symbol">,</span> M<span class="sh_symbol">)))</span> <span class="sh_symbol">==</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">)</span> <span class="sh_keyword">return</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">if</span><span class="sh_symbol">(</span>qr <span class="sh_symbol">&gt;</span> M <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span>rv <span class="sh_symbol">=</span> <span class="sh_function">valid_range</span><span class="sh_symbol">(</span>st<span class="sh_symbol">[</span>id<span class="sh_symbol">].</span>rc<span class="sh_symbol">,</span> M <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> R<span class="sh_symbol">,</span> <span class="sh_function">max</span><span class="sh_symbol">(</span>ql<span class="sh_symbol">,</span> M <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">),</span> qr<span class="sh_symbol">))</span> <span class="sh_symbol">==</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">)</span> <span class="sh_keyword">return</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">return</span> <span class="sh_function">max</span><span class="sh_symbol">(</span>lv<span class="sh_symbol">,</span> rv<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>

<span class="sh_type">int</span> <span class="sh_function">main</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span>
    st<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">].</span>valid <span class="sh_symbol">=</span> st<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">].</span>v <span class="sh_symbol">=</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>n<span class="sh_symbol">);</span> n<span class="sh_symbol">;</span> <span class="sh_symbol">--</span>n<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        <span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>year<span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>rain<span class="sh_symbol">);</span>
        <span class="sh_function">adj</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> year<span class="sh_symbol">,</span> rain<span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_keyword">for</span><span class="sh_symbol">(</span><span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>n<span class="sh_symbol">);</span> n<span class="sh_symbol">;</span> <span class="sh_symbol">--</span>n<span class="sh_symbol">)</span><span class="sh_cbracket">{</span>
        <span class="sh_function">scanf</span><span class="sh_symbol">(</span><span class="sh_string">"%d%d"</span><span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>u<span class="sh_symbol">,</span> <span class="sh_symbol">&amp;</span>v<span class="sh_symbol">);</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">(</span>u <span class="sh_symbol">&gt;=</span> v<span class="sh_symbol">)</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">false</span><span class="sh_symbol">);</span>
        ru <span class="sh_symbol">=</span> <span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> u<span class="sh_symbol">,</span> u<span class="sh_symbol">);</span>
        rv <span class="sh_symbol">=</span> <span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> v<span class="sh_symbol">,</span> v<span class="sh_symbol">);</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">(~</span>ru <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">~</span>rv <span class="sh_symbol">&amp;&amp;</span> ru <span class="sh_symbol">&gt;=</span> rv<span class="sh_symbol">)</span><span class="sh_cbracket">{</span> <span class="sh_comment">// ru &gt;= rv</span>
            <span class="sh_keyword">if</span><span class="sh_symbol">(</span>u <span class="sh_symbol">+</span> <span class="sh_number">1</span> <span class="sh_symbol">==</span> v <span class="sh_symbol">||</span> <span class="sh_symbol">(</span>
                <span class="sh_symbol">~(</span>rbet <span class="sh_symbol">=</span> <span class="sh_function">valid_range</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> u <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> v <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">))</span> <span class="sh_symbol">&amp;&amp;</span> rbet <span class="sh_symbol">&lt;</span> rv<span class="sh_symbol">))</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">);</span> <span class="sh_comment">// valid</span>
            rbet <span class="sh_symbol">=</span> <span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> u <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> v <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">);</span> <span class="sh_comment">// rain between is less or unknown</span>
            <span class="sh_keyword">if</span><span class="sh_symbol">(</span>rbet <span class="sh_symbol">&lt;</span> rv<span class="sh_symbol">)</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">maybe</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">((~</span>ru <span class="sh_symbol">&amp;&amp;</span> rv <span class="sh_symbol">==</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">)</span> <span class="sh_symbol">||</span> <span class="sh_symbol">(</span>ru <span class="sh_symbol">==</span> <span class="sh_symbol">-</span><span class="sh_number">1</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">~</span>rv<span class="sh_symbol">))</span><span class="sh_cbracket">{</span> <span class="sh_comment">// ru, rv only know one</span>
            rain <span class="sh_symbol">=</span> <span class="sh_symbol">~(~</span>ru <span class="sh_symbol">|</span> <span class="sh_symbol">~</span>rv<span class="sh_symbol">);</span>
            rbet <span class="sh_symbol">=</span> <span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> ST_MIN<span class="sh_symbol">,</span> ST_MAX<span class="sh_symbol">,</span> u <span class="sh_symbol">+</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> v <span class="sh_symbol">-</span> <span class="sh_number">1</span><span class="sh_symbol">);</span> <span class="sh_comment">// rain between is less or unknown</span>
            <span class="sh_keyword">if</span><span class="sh_symbol">(</span>rbet <span class="sh_symbol">&lt;</span> rain<span class="sh_symbol">)</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">maybe</span><span class="sh_symbol">);</span>
        <span class="sh_cbracket">}</span>
        <span class="sh_keyword">if</span><span class="sh_symbol">((</span>ru <span class="sh_symbol">&amp;</span> rv<span class="sh_symbol">)</span> <span class="sh_symbol">==</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">)</span> <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">maybe</span><span class="sh_symbol">);</span> <span class="sh_comment">// know neither</span>
        <span class="sh_function">ret</span><span class="sh_symbol">(</span><span class="sh_keyword">false</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_keyword">return</span> <span class="sh_number">0</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

</code></pre></div>

<h3>坑</h3>
<p><strong>坑1：</strong>在动态开点线段树时，初始就有一棵 (根编号为 $1$ 的) 线段树，因此要 <code>cnt = 1</code> 而不是 $0$，避免重新建立编号为 $1$ 的节点。</p>

